<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="src/style.css">
    <script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>
</head>

<body>

    <div class="main_container">
        <div class="main">
            <div class="heading">
                <h2 id="cityNameH">London</h2>
                <h5>Last updated at: <span id="date">Monday 16:00</span></h5>
                <h5 id="desc">Cloudy</h5>
            </div>
            <div class="temp">
                <div class="cloud">☁️</div>
                <h1 id="tmp">10 </h1>
                <div id="c" class="degree"><a href="#" style="text-decoration: none; color:black;">°C|</a></div>
                <div id="f" class="degree"><a href="#" style="text-decoration: none; color:black;">°F</a></div>
            </div>
            <div class="wind">
                <h6 style="display: inline">Humidity:</h6>
                <h6 id="Humi" style="display: inline;">10</h6>
                <h6 style="display: inline;">%</h6>
                <h6 id="Wind">Wind: <span id="wind">13</span> km/h</h6>
            </div>
        </div>
    </div>
    <p class="footer"><a href="https://github.com/vijetarajput/Weather-Project"
            style="text-decoration: none;">Open-source code </a>by Vijeta Singh</p>
</body>
<script>
    function formatDate(timestamp) {
        let date = new Date(timestamp);
        let hours = date.getHours();
        if (hours < 10) {
            hours = `0${hours}`;
        }
        let minutes = date.getMinutes();
        if (minutes < 10) {
            minutes = `0${minutes}`;
        }

        let days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
        let day = days[date.getDay()];
        return `${day} ${hours}:${minutes}`;
    }

    let apikey = "08f21c358ceb7bbd0f79880f5ba5bbf3";
    let apiurl = `https://api.openweathermap.org/data/2.5/weather?q=london&appid=${apikey}&units=metric`;
    function display(response) {
        console.log(response.data);
        let tempid = document.querySelector("#tmp");
        tempid.innerHTML = response.data.main.temp;
        let city = document.querySelector("#cityNameH");
        city.innerHTML = response.data.name;
        let description = document.querySelector("#desc");
        description.innerHTML = response.data.weather[0].description;
        let humi = document.querySelector("#Humi");
        humi.innerHTML = response.data.main.humidity;
        let wind = document.querySelector("#wind");
        wind.innerHTML = Math.round(response.data.wind.speed);

        let dispDate = document.querySelector("#date");
        dispDate.innerHTML = formatDate(response.data.dt * 1000);
    }
    axios.get(apiurl).then(display);

</script>

</html>